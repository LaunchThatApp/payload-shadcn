{"version":3,"sources":["../../../src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport type { ControllerProps, FieldPath, FieldValues } from \"react-hook-form\";\nimport * as React from \"react\";\nimport { Label } from \"@/components/ui/label\";\nimport { cn } from \"@/lib/utils\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n} from \"react-hook-form\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState } = useFormContext();\n  const formState = useFormState({ name: fieldContext.name });\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  );\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  );\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFormField();\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message ?? \"\") : props.children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-sm text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n"],"names":["React","Label","cn","Slot","Controller","FormProvider","useFormContext","useFormState","Form","FormFieldContext","createContext","FormField","props","Provider","value","name","useFormField","fieldContext","useContext","itemContext","FormItemContext","getFieldState","formState","fieldState","Error","id","formItemId","formDescriptionId","formMessageId","FormItem","className","useId","div","data-slot","FormLabel","error","data-error","htmlFor","FormControl","aria-describedby","aria-invalid","FormDescription","p","FormMessage","body","String","message","children"],"mappings":"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"}